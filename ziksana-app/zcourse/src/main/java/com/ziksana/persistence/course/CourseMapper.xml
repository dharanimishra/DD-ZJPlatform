<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ziksana.persistence.course.CourseMapper">
	<sql id="Base_Column_List">
		courseid, name, courseidentifier, description, validfrom,
		validto, coursestatus, rating,
		contentsecurityneededindicator,
		courseweightage, totalcredits, extracreditsindicator,
		extracredits,additionalpropertyindicator, courseduration,
		thumbnailpicturepath, templateindicator, version, memberroleid,
		subjclassificationid
	</sql>

	<update id="updateCourse" parameterType="com.ziksana.domain.course.Course">
		update corcourse
		<set>
			<if test="name!=null">
					name = #{name,jdbcType=VARCHAR},
				</if>
				<if test="description!=null">
					description = #{description,jdbcType=VARCHAR},
				</if>
				<if test="courseStatus!=null">
					courseStatus = #{courseStatusId,jdbcType=INTEGER},
				</if>
				<if test="contentSecurityNeededIndicator!=null">
					 contentsecurityneededindicator = contentsecurityneededindicator = #{securityIndicator,jdbcType=BOOLEAN},
				</if>
				<if test="extraCredits!=null">
					extracredits = #{extraCredits,jdbcType=VARCHAR},
				</if>
				<if test="additionalPropertyIndicator!=null">
					additionalpropertyindicator = #{additionalInfoIndicator,jdbcType=BOOLEAN},
				</if>
				<if test="courseDuration!=null">
					courseduration= #{courseDuration.duration,jdbcType=INTEGER},
				</if>
				<if test="thumbnailPicturePath!=null">
					thumbnailpicturepath = #{thumbnailPicturePath,jdbcType=VARCHAR},
				</if>
				<if test="version!=null">
					version = #{version,jdbcType=INTEGER},
				</if>
				<if test="versionRemarks!=null">
					versionremarks =#{versionRemarks,jdbcType=VARCHAR},
				</if>
				<if test="accountableMember.memberRoleId!=null">
					memberroleid = #{accountableMember.memberRoleId,jdbcType=INTEGER},
				</if>
				<if test="subjClassification.subjClassificationId!=null">
					subjclassificationid = #{subjClassification.subjClassificationId,jdbcType=INTEGER},
				</if>
			</set>
			where courseid = #{courseId,jdbcType=INTEGER}
	</update>

	<insert id="saveCourse" parameterType="com.ziksana.domain.course.Course"
		useGeneratedKeys="true" keyProperty="courseId" keyColumn="courseid">
		insert into corcourse 
		<trim prefix="(" suffix=")" suffixOverrides=",">
				<if test="name!=null">
					name,
				</if>
				<if test="description!=null">
					description,
				</if>
				<if test="coursestatus!=null">
					coursestatus,
				</if>
				<if test="contentsecurityneededindicator!=null">
					contentsecurityneededindicator,
				</if>
				<if test="extracredits!=null">
					extracredits,
				</if>
				<if test="additionalpropertyindicator!=null">
					additionalpropertyindicator,
				</if>
				<if test="courseduration!=null">
					courseduration,
				</if>
				<if test="thumbnailpicturepath!=null">
					thumbnailpicturepath,
				</if>
				<if test="version!=null">
					version,
				</if>
				<if test="versionremarks!=null">
					versionremarks,
				</if>
				<if test="memberroleid!=null">
					memberroleid,
				</if>
				<if test="subjclassificationid!=null">
					subjclassificationid,
				</if>
			</trim>
			<trim prefix="values (" suffix=")" suffixOverrides=",">
				<if test="name!=null">
					#{name,jdbcType=VARCHAR},
				</if>
				<if test="description!=null">
					#{description,jdbcType=VARCHAR},
				</if>
				<if test="courseStatus!=null">
					#{courseStatusId,jdbcType=INTEGER},
				</if>
				<if test="contentSecurityNeededIndicator!=null">
					#{securityIndicator,jdbcType=BOOLEAN},
				</if>
				<if test="extraCredits!=null">
					#{extraCredits,jdbcType=VARCHAR},
				</if>
				<if test="additionalPropertyIndicator!=null">
					#{additionalInfoIndicator,jdbcType=BOOLEAN},
				</if>
				<if test="courseDuration!=null">
					#{courseDuration.duration,jdbcType=INTEGER},
				</if>
				<if test="thumbnailPicturePath!=null">
					#{thumbnailPicturePath,jdbcType=VARCHAR},
				</if>
				<if test="version!=null">
					#{version,jdbcType=INTEGER},
				</if>
				<if test="versionRemarks!=null">
					#{versionRemarks,jdbcType=VARCHAR},
				</if>
				<if test="accountableMember.memberRoleId!=null">
					#{accountableMember.memberRoleId,jdbcType=INTEGER},
				</if>
				<if test="subjClassification.subjClassificationId!=null">
					#{subjClassification.subjClassificationId,jdbcType=INTEGER},
				</if>
			</trim> 
			<selectKey keyProperty="courseId" resultType="int"
				order="AFTER">
				SELECT LAST_INSERT_ID();
			</selectKey>
	</insert>

</mapper>