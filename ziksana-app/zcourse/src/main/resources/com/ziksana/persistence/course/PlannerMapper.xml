<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ziksana.persistence.course.PlannerMapper">

	<insert id="saveCourseLearningPlanner" parameterType="com.ziksana.domain.course.CourseLearningPlanner"
		useGeneratedKeys="true" keyProperty="learningPlannerId" keyColumn="learningplannerid">
		insert into corcourselearningplanner
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="startPeriod != null">
				startperiod,
			</if>
			<if test="endPeriod != null">
				endperiod,
			</if>
			<if test="startTime != null">
				starttime,
			</if>
			<if test="endTime != null">
				endtime,
			</if>
			<if test="duration != null">
				duration,
			</if>
			<if test="course != null">
				courseid,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="startPeriod != null">
				#{startPeriod, jdbcType=DATE},
			</if>
			<if test="endPeriod != null">
				#{endPeriod, jdbcType=DATE},
			</if>
			<if test="startTime != null">
				#{startTime, jdbcType=TIMESTAMP},
			</if>
			<if test="endTime != null">
				#{endTime, jdbcType=TIMESTAMP},
			</if>
			<if test="duration != null">
				#{duration.duration, jdbcType=INTEGER},
			</if>
			<if test="course != null">
				#{course.courseId.storageID, jdbcType=INTEGER},
			</if>
		</trim>
		<selectKey keyProperty="learningPlannerId" resultType="int"
			order="AFTER">
			SELECT LAST_INSERT_ID();
		</selectKey>
	</insert>



	<update id="updateCourseLearningPlanner" parameterType="com.ziksana.domain.course.CourseLearningPlanner">
		update corcourselearningplanner
		<set>
			<if test="startPeriod != null">
				#{startPeriod, jdbcType=DATE},
			</if>
			<if test="endPeriod != null">
				#{endPeriod, jdbcType=DATE},
			</if>
			<if test="startTime != null">
				#{startTime, jdbcType=TIMESTAMP},
			</if>
			<if test="endTime != null">
				#{endTime, jdbcType=TIMESTAMP},
			</if>
			<if test="duration != null">
				#{duration.duration, jdbcType=INTEGER},
			</if>
		</set>
		where learningplannerid = #{learningPlannerId.storageID,jdbcType.INTEGER}
	</update>


	<!-- <insert id="saveReference" parameterType="com.ziksana.domain.course.Enrichment" 
		useGeneratedKeys="true" keyProperty="enrichmentId" keyColumn="enrichmentid"> 
		insert into corenrichment ( creationdate, active, visibility, overrideat, 
		learningcontentid, creatormemberroleid) values (sysdate(), #{active,jdbcType=BOOLEAN}, 
		#{visibilityId,jdbcType=INTEGER}, #{overrideAt,jdbcType=INTEGER}, #{learningContent.learningContentId,jdbcType=INTEGER}, 
		#{creatorMemberPersona.memberRoleId,jdbcType=INTEGER}) <selectKey keyProperty="enrichmentId" 
		resultType="int" order="AFTER"> SELECT LAST_INSERT_ID(); </selectKey> </insert> -->

	<!-- <insert id="saveRefenceContent" parameterType="com.ziksana.domain.course.ContentEnrichment" 
		useGeneratedKeys="true" keyProperty="contentEnrichmentId" keyColumn="contentenrichmentid"> 
		insert into corcontentenrichment (starttime, endtime, linktype, linkelement, 
		linkdescription, linkitemcost, linksource, active, isdelete, enrichmentid 
		) values (#{startTime,jdbcType=TIMESTAMP}, #{endTime,jdbcType=TIMESTAMP}, 
		#{linkTypeId,jdbcType=INTEGER}, #{linkElement,jdbcType=VARCHAR}, #{linkDescription,jdbcType=VARCHAR}, 
		#{linkItemCost,jdbcType=INTEGER}, #{linkSourceId,jdbcType=INTEGER}, #{active,jdbcType=BOOLEAN}, 
		#{isDelete,jdbcType=BOOLEAN}, #{enrichment.enrichmentId,jdbcType=INTEGER}) 
		}) <selectKey keyProperty="contentEnrichmentId" resultType="int" order="AFTER"> 
		SELECT LAST_INSERT_ID(); </selectKey> </insert> -->
</mapper>