<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>Gantt with tree</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="featured" content="yes"><meta name="title" content="Samples" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<link rel="icon" href="../common/favicon.ico" type="image/x-icon" />
		<link rel="shortcut icon" href="../common/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="../common/css/style.css" type="text/css" media="screen" />

	</head>
	<body onload="createChartControl('GanttDiv')">
        
        <div class="content">
            
            <link type="text/css" rel="stylesheet" href="../../codebase/dhtmlxgantt.css">
    <script type="text/javascript" language="JavaScript" src="../../codebase/dhtmlxcommon.js"></script>
    <script type="text/javascript" language="JavaScript" src="../../codebase/dhtmlxgantt.js"></script>
     
     <link rel="stylesheet" type="text/css" href="../../../dhtmlxMenu/codebase/skins/dhtmlxmenu_dhx_skyblue.css">
	
	<script type="text/javascript" language="JavaScript" src="../../../dhtmlxMenu/codebase/dhtmlxmenu.js"></script>
	
   
	<script type="text/javascript" language="JavaScript" src="../../../dhtmlxMenu/codebase/ext/dhtmlxmenu_ext.js"></script>
    
    </script>

    <script type="text/javascript" language="JavaScript">
	
	var ganttChartControl;
    /*<![CDATA[*/
    function createChartControl(htmlDiv1)
    {
        // Initialize Gantt data structures

        //project 1
        var project1 = new GanttProjectInfo(1, "Model Thinking", new Date(2012, 5, 11));

        var parentTask1 = new GanttTaskInfo(1, "Why Model Thinking", new Date(2012, 5, 11), 150, 50, "");
		var childTask2 = new GanttTaskInfo(2, "Why Model", new Date(2012, 5, 14), 20, 40, "");
		var childTask21 = new GanttTaskInfo(21, "Assignment 1", new Date(2012, 5, 15), 5, 80, "");
		var childTask211 = new GanttTaskInfo(211, "Chapter 1 Exit Test", new Date(2012, 5, 15), 3, 80, "");
        
		parentTask1.addChildTask(childTask2);
		childTask2.addChildTask(childTask21);
		childTask21.addChildTask(childTask211);
		
		
        parentTask1.addChildTask(new GanttTaskInfo(13, "Intelligent Citizens of the World", new Date(2012, 5, 21), 15, 30, "2"));

       
	   var parentTask2 = new GanttTaskInfo(3, "Aggregation", new Date(2012, 5, 30), 80, 80, "1");
       
	    parentTask2.addChildTask(new GanttTaskInfo(31, "Six Sigma", new Date(2012, 5, 31), 20, 1, ""));
       
	    parentTask2.addChildTask(new GanttTaskInfo(32, "Aggregation", new Date(2012, 6, 7), 8, 10, "31"));
       
	    parentTask2.addChildTask(new GanttTaskInfo(33, "Preference Aggregation", new Date(2012, 6, 7), 8, 90, "31"));

		
		var parentTask3 = new GanttTaskInfo(4, "Decision Models ", new Date(2012, 6, 10), 70, 80, "3");
      
		parentTask3.addChildTask(new GanttTaskInfo(41, "Introduction to Decision Making", new Date(2012, 6, 11), 20, 80, ""));

       parentTask3.addChildTask(new GanttTaskInfo(42, "Probability: The Basics", new Date(2012, 6, 14), 30, 100, "41"));
       
        project1.addTask(parentTask1);
        project1.addTask(parentTask2);
		project1.addTask(parentTask3);

      
        // Create Gantt control
       ganttChartControl = new GanttChart();
        // Setup paths and behavior
        ganttChartControl.setImagePath("../../codebase/imgs/");
		 ganttChartControl.setStylePath("../../codebase/dhtmlxgantt.css");
        ganttChartControl.setEditable(true);
        ganttChartControl.showTreePanel(true);
        ganttChartControl.showContextMenu(true);
        ganttChartControl.showDescTask(true,'d,s-f');
        ganttChartControl.showDescProject(true,'n,d');
		
		
		
		
		// Sample custom menu
    var menu = new dhtmlXMenuObject();
    menu.setIconsPath("../../../dhtmlxMenu/codebase/imgs/dhtmlxmenu_dhx_skyblue");
    menu.renderAsContextMenu();
    menu.loadXMLString('<menu><item id="m1" text="Item name placeholder"/><item id="m2" text="Get info"/><item id="m3" text="Delete Task"/></menu>');
    menu.attachEvent("onClick", function(id){
        var obj = menu.getUserData("","obj");
        if (obj) {
            var o = obj.o;
            if (obj.type == "p") {
                alert("Project, id=" + o.getId() + ", name=" + o.getName() + ", start date=" + o.getStartDate() +
                        ", duration=" + o.getDuration() + "hours, percent complete=" + o.getPercentCompleted() + "%");
            } else
            if (obj.type == "t") {
                if(id=="m3") {
                    // Handle "Delete Task" menu
                    if (confirm("Delete task \""+o.getName()+"\"?")) ganttChartControl.getProjectById(1).deleteTask(o.getId());
                } else
                    alert("Task, id=" + obj.o.getId() + ", name=" + obj.o.getName() + ", EST=" + obj.o.getEST() +
                          ", duration=" + o.getDuration() + "hours, percent complete=" + o.getPercentCompleted() + "%" +
                          ", parentTaskId=" + o.getParentTaskId() + ", pred.taskId=" + o.getPredecessorTaskId());
            }
        }
    });
    ganttChartControl.setContextMenu(menu);
    ganttChartControl.attachEvent("onBeforeContextMenu", function(menu,obj) {
        // Sample of disabling menu for a particular item with Id = 13
        if (obj.getId()==13) {alert("This task has no menu."); return false;}
        if (obj.isProject) {
            // Project menu
            menu.setItemText("m1", "Project: " + obj.getName());
            menu.setUserData("","obj",{type:"p",o:obj});
            menu.setItemDisabled("m3");
        } else if (obj.isTask) {
            // Task menu
            menu.setItemText("m1", "Task: " + obj.getName());
            menu.setUserData("","obj",{type:"t",o:obj});
            menu.setItemEnabled("m3");
        }
    });
		
		
        // Load data structure		
        ganttChartControl.addProject(project1);
      //  ganttChartControl.addProject(project2);

        // Build control on the page
        ganttChartControl.create(htmlDiv1);
    }
    /*]]>*/
</script>




<div style="width:950px; height:620px; position:relative;" id="GanttDiv"></div>
			
	<p>
<input onclick="ganttChartControl.printToWindow()" type="button" value="Print Planner Chart" style="margin-left:450px">
</p>		
         </div>
    
    
	</body>
</html>